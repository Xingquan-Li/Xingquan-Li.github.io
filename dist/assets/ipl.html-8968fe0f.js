import{_ as i}from"./iPL-f9376711.js";import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as d,c as a,b as e,f as l,d as t,e as r}from"./app-1ed3f6c2.js";const s={},o=l('<h1 id="introduction-to-the-ipl-placement-tool" tabindex="-1"><a class="header-anchor" href="#introduction-to-the-ipl-placement-tool" aria-hidden="true">#</a> Introduction to the iPL Placement Tool</h1><h2 id="_1-background-introduction" tabindex="-1"><a class="header-anchor" href="#_1-background-introduction" aria-hidden="true">#</a> 1. Background Introduction</h2><ol><li>Placement Problem: Given a set of cells with connection relationships (nets) and a placement area, the placement places the cells. The general placement goal is to minimize the total wire length/timing/power consumption of the nets, and requires the cells to meet the legality requirements (within the placement area, aligned with Rows/Sites, and no overlap between cells, etc.).</li></ol><ul><li>Net: A single net can connect multiple Pin points (Pin points are located on the cells or at the IO); The routing direction of the net is only horizontal and vertical.</li><li>Cell: The shape is usually rectangular. Cell types include macro cells, standard cells (timing cells, logic cells), etc.; Cell states include fixed and to be placed.</li></ul><img src="'+i+'"><p>Figure 1 Main Flowchart of iPL</p><h2 id="_2-main-implementations" tabindex="-1"><a class="header-anchor" href="#_2-main-implementations" aria-hidden="true">#</a> 2. Main Implementations</h2><h3 id="_2-1-function-implementations" tabindex="-1"><a class="header-anchor" href="#_2-1-function-implementations" aria-hidden="true">#</a> 2.1 Function Implementations</h3>',8),f=t("p",null,"Figure 5 The main placement process implemented in iPL. Solving large-scale placement problems in one step is NP-hard. Therefore, it is generally divided into three stages: global placement, legalization, and detailed placement.",-1),g=t("ul",null,[t("li",null,[r("Place std cell into proper location "),t("ul",null,[t("li",null,"Satisfy layer poly, well, contact, and metal 1 design rule"),t("li",null,"Optimize wirelength, timing, congestion")])]),t("li",null,"Place macro cell location automatically"),t("li",null,"Incremental placement"),t("li",null,"Timing-driven placement (coming soon)"),t("li",null,"Congestion-driven placement (coming soon)")],-1),y=l('<p>Figure 6 Schematic Diagram of Placement</p><h3 id="_2-2-tool-api-implementations" tabindex="-1"><a class="header-anchor" href="#_2-2-tool-api-implementations" aria-hidden="true">#</a> 2.2 Tool API Implementations</h3><table><thead><tr><th style="text-align:left;">Method Name</th><th style="text-align:left;">Sub-method</th><th style="text-align:left;">Type</th><th style="text-align:left;">Parameter List</th><th style="text-align:left;">Return Value</th><th style="text-align:left;">Method Description</th></tr></thead><tbody><tr><td style="text-align:left;">initAPI</td><td style="text-align:left;">*</td><td style="text-align:left;">action</td><td style="text-align:left;">pl_json_path, idb_builder</td><td style="text-align:left;">self</td><td style="text-align:left;">Initialize iPL</td></tr><tr><td style="text-align:left;">runFlow</td><td style="text-align:left;">runGP</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Run global placement</td></tr><tr><td style="text-align:left;">runFlow</td><td style="text-align:left;">runBufferInsertion</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Run buffer insertion</td></tr><tr><td style="text-align:left;">runFlow</td><td style="text-align:left;">runLG</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Run legalization</td></tr><tr><td style="text-align:left;">runFlow</td><td style="text-align:left;">runDP</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Run detailed placement</td></tr><tr><td style="text-align:left;">runFlow</td><td style="text-align:left;">writeBackSourceDataBase</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Write back placement data to the data source</td></tr><tr><td style="text-align:left;">runIncrLG</td><td style="text-align:left;">*</td><td style="text-align:left;">action</td><td style="text-align:left;">inst_list</td><td style="text-align:left;">self</td><td style="text-align:left;">Run incremental legalization</td></tr><tr><td style="text-align:left;">updatePlacerDB</td><td style="text-align:left;">*</td><td style="text-align:left;">action</td><td style="text-align:left;">void/inst_list</td><td style="text-align:left;">self</td><td style="text-align:left;">Update (specified) data from the data source</td></tr><tr><td style="text-align:left;">obtainAvailableWhiteSpaceList</td><td style="text-align:left;">*</td><td style="text-align:left;">action</td><td style="text-align:left;">row_range, site_range</td><td style="text-align:left;">rectanglelist</td><td style="text-align:left;">Obtain the available placement space in the specified area (for inserting cells)</td></tr><tr><td style="text-align:left;">checkLegality</td><td style="text-align:left;">*</td><td style="text-align:left;">accessor</td><td style="text-align:left;">void</td><td style="text-align:left;">bool</td><td style="text-align:left;">Check the legality of the current placement result</td></tr><tr><td style="text-align:left;">isSTAStarted</td><td style="text-align:left;">*</td><td style="text-align:left;">accessor</td><td style="text-align:left;">void</td><td style="text-align:left;">bool</td><td style="text-align:left;">Check if STA has been started</td></tr><tr><td style="text-align:left;">isPlacerDBStarted</td><td style="text-align:left;">*</td><td style="text-align:left;">accessor</td><td style="text-align:left;">void</td><td style="text-align:left;">bool</td><td style="text-align:left;">Check if PlacerDB has been initialized</td></tr><tr><td style="text-align:left;">isAbucasLGStarted</td><td style="text-align:left;">*</td><td style="text-align:left;">accessor</td><td style="text-align:left;">void</td><td style="text-align:left;">bool</td><td style="text-align:left;">Check if the Abucas legalizer has been started</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportHPWLInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report HPWL information</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportSTWLInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report STWL information</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportLongNetInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report long net information</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportLayoutInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report layout violation information</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportPeakBinDensity</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report the peak density of the Bin area</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportTimingInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report layout timing information</td></tr><tr><td style="text-align:left;">reportPLInfo</td><td style="text-align:left;">reportCongestionInfo</td><td style="text-align:left;">accessor</td><td style="text-align:left;">feed</td><td style="text-align:left;">self</td><td style="text-align:left;">Report layout congestion information</td></tr><tr><td style="text-align:left;">obtainTimingInfo</td><td style="text-align:left;">obtainPinEarly(Late)Slack</td><td style="text-align:left;">action</td><td style="text-align:left;">pin_name</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain the Slack information on the Pin</td></tr><tr><td style="text-align:left;">obtainTimingInfo</td><td style="text-align:left;">obtainPinEarly(Late)ArrivalTime</td><td style="text-align:left;">action</td><td style="text-align:left;">pin_name</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain the ArrivalTime information on the Pin</td></tr><tr><td style="text-align:left;">obtainTimingInfo</td><td style="text-align:left;">obtainPinEarly(Late)RequiredTime</td><td style="text-align:left;">action</td><td style="text-align:left;">pin_name</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain the RequiredTime information on the Pin</td></tr><tr><td style="text-align:left;">obtainTimingInfo</td><td style="text-align:left;">obtainWNS/TNS</td><td style="text-align:left;">action</td><td style="text-align:left;">clk_name</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain WNS/TNS information</td></tr><tr><td style="text-align:left;">obtainTimingInfo</td><td style="text-align:left;">updateTiming</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">self</td><td style="text-align:left;">Update timing evaluation</td></tr><tr><td style="text-align:left;">obtainCongesionInfo</td><td style="text-align:left;">obtainPinDens</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain Pin Density information</td></tr><tr><td style="text-align:left;">obtainCongesionInfo</td><td style="text-align:left;">obtainNetCong</td><td style="text-align:left;">action</td><td style="text-align:left;">rudy_type</td><td style="text-align:left;">value</td><td style="text-align:left;">Obtain net congestion information</td></tr><tr><td style="text-align:left;">obtainCongesionInfo</td><td style="text-align:left;">evalGRCong</td><td style="text-align:left;">action</td><td style="text-align:left;">void</td><td style="text-align:left;">value</td><td style="text-align:left;">Update congestion evaluation</td></tr></tbody></table><h2 id="_3-key-technologies" tabindex="-1"><a class="header-anchor" href="#_3-key-technologies" aria-hidden="true">#</a> 3. Key Technologies</h2><h3 id="_3-1-module-design" tabindex="-1"><a class="header-anchor" href="#_3-1-module-design" aria-hidden="true">#</a> 3.1 Module Design</h3>',5),c=l('<p>Figure 7 Division of iPL Modules</p><ul><li>PlacerDB Module: Encapsulates and maintains the layout data (layout) and design data (Design) required for placement</li><li>Operator Module: Extracts placement data for operation, calls the solver module for solving during the process, the evaluator module for evaluating indicators, and the checker module for checking the placement result</li><li>Solver Module: A collection of mature solving tools to assist in placement</li><li>Checker Module: Conduct violation checks, functional detections, and report output on the current placement. Evaluator Module: Evaluate the current placement indicators</li><li>Wrapper Module: Read placement data from the data source and write the placement result back to the data source</li><li>API: The interaction interface between iPL and the outside</li></ul><h3 id="_3-2-routing-feasibility-solution" tabindex="-1"><a class="header-anchor" href="#_3-2-routing-feasibility-solution" aria-hidden="true">#</a> 3.2 Routing Feasibility Solution</h3><ul><li>Wirelength Gradient: WA Wirelength Smooth Model</li><li>Density Gradient: e-Density Electrostatic Field Model</li><li>Optimization Algorithm: Nesterov Gradient Descent Algorithm</li><li>Congestion Evaluation Method (API provided by iEDA evaluator): <ul><li>LUT-RUDY (Look Up Table-based RUDY)</li><li>Early-GR</li></ul></li><li>Fine-grained Cell Expansion: <ul><li>Select cells in peak congestion grids for expansion</li><li>Independent expansion in H/V directions</li><li>Dynamic expansion rate adjustment</li><li>Superlinear expansion index correction</li></ul></li></ul><p>When all cells in the global placement are spread out enough (density overflow &lt; 0.2), start evaluating and optimizing the routing feasibility.</p>',5),x=l('<p>Figure 8 Process of iPL Routing Feasibility Solution</p><h2 id="_4-input-and-output" tabindex="-1"><a class="header-anchor" href="#_4-input-and-output" aria-hidden="true">#</a> 4. Input and Output</h2><p><strong>Input</strong></p><ul><li>Netlist optimization def file./result/iTO_fix_fanout_result.def</li></ul><p><strong>Output</strong></p><p>-./result/iPL_result.def<br> -./result/iPL_result.v</p><p><strong>Evaluation and Report</strong></p><p>-./result/report/pl_db.rpt</p><p>The intermediate reports of the iPL tool are stored in the directory by default: <code>./scripts/design/sky130_gcd/result/pl/</code></p>',9),h=t("p",null,"Figure 9 Checking whether the current placement result has violations. The detailed violation situation is in the file violation_record.txt in the same-level directory",-1),p=l(`<p>Figure 10 Wire length index report of placement optimization. The detailed report of long nets is in the file wirelength_record.txt in the same-level directory; The density information of cell distribution, the detailed report is in the file density_record.txt in the same-level directory; The timing information of the placement result, the detailed report is in the file timing_record.txt in the same-level directory; The routing feasibility information of the placement result, the detailed report is in the file congestion_record.txt in the same-level directory</p><ul><li>report/violation_record.txt : Cells with placement violations</li><li>report/wirelength_record.txt : Statistics of HPWL wire length, STWL wire length, and long wire length of the placement</li><li>report/density_record.txt : Peak bin density of the placement</li><li>report/timing_record.txt : Timing information of the placement (wns, tns), calling Flute for simple routing</li><li>report/congestion_record.txt : Routing feasibility information of the placement</li></ul><h2 id="_5-parameter-description" tabindex="-1"><a class="header-anchor" href="#_5-parameter-description" aria-hidden="true">#</a> 5 <strong>Parameter Description</strong></h2><p>Refer to iEDA_config/pl_default_config.json: <code>./scripts/design/sky130_gcd/iEDA_config/pl_default_config.json</code></p><table><thead><tr><th style="text-align:left;">Parameter Name</th><th style="text-align:left;">Function Description</th><th style="text-align:left;">Parameter Range</th><th style="text-align:left;">Default Value</th></tr></thead><tbody><tr><td style="text-align:left;">is_max_length_opt</td><td style="text-align:left;">Whether to enable maximum wire length optimization</td><td style="text-align:left;">[0,1]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">max_length_constraint</td><td style="text-align:left;">Specify the maximum wire length</td><td style="text-align:left;">[0-1000000]</td><td style="text-align:left;">1000000</td></tr><tr><td style="text-align:left;">is_timing_aware_mode</td><td style="text-align:left;">Whether to enable timing mode</td><td style="text-align:left;">[0,1]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">ignore_net_degree</td><td style="text-align:left;">Ignore nets with more than the specified number of pins</td><td style="text-align:left;">[10-10000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">num_threads</td><td style="text-align:left;">Specify the number of CPU threads</td><td style="text-align:left;">[1-64]</td><td style="text-align:left;">8</td></tr><tr><td style="text-align:left;">[GP-Wirelength] init_wirelength_coef</td><td style="text-align:left;">Set the initial wire length coefficient</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.25</td></tr><tr><td style="text-align:left;">[GP-Wirelength] reference_hpwl</td><td style="text-align:left;">Adjust the reference wire length for density penalty</td><td style="text-align:left;">[100-1000000]</td><td style="text-align:left;">446000000</td></tr><tr><td style="text-align:left;">[GP-Wirelength] min_wirelength_force_bar</td><td style="text-align:left;">Control the wire length boundary</td><td style="text-align:left;">[-1000-0]</td><td style="text-align:left;">-300</td></tr><tr><td style="text-align:left;">[GP-Density] target_density</td><td style="text-align:left;">Specify the target density</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.8</td></tr><tr><td style="text-align:left;">[GP-Density] bin_cnt_x</td><td style="text-align:left;">Specify the number of Bins in the horizontal direction</td><td style="text-align:left;">[16,32,64,128,256,512,1024]</td><td style="text-align:left;">512</td></tr><tr><td style="text-align:left;">[GP-Density] bin_cnt_y</td><td style="text-align:left;">Specify the number of Bins in the vertical direction</td><td style="text-align:left;">[16,32,64,128,256,512,1024]</td><td style="text-align:left;">512</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_iter</td><td style="text-align:left;">Specify the maximum number of iterations</td><td style="text-align:left;">[50-2000]</td><td style="text-align:left;">2000</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_backtrack</td><td style="text-align:left;">Specify the maximum number of backtracks</td><td style="text-align:left;">[0-100]</td><td style="text-align:left;">10</td></tr><tr><td style="text-align:left;">[GP-Nesterov] init_density_penalty</td><td style="text-align:left;">Specify the density penalty in the initial state</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.00008</td></tr><tr><td style="text-align:left;">[GP-Nesterov] target_overflow</td><td style="text-align:left;">Specify the target overflow value</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.1</td></tr><tr><td style="text-align:left;">[GP-Nesterov] initial_prev_coordi_update_coef</td><td style="text-align:left;">The coefficient when perturbing the initial coordinates</td><td style="text-align:left;">[10-10000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[GP-Nesterov] min_precondition</td><td style="text-align:left;">Set the minimum value of the precondition</td><td style="text-align:left;">[1-100]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[GP-Nesterov] min_phi_coef</td><td style="text-align:left;">Set the minimum phi parameter</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.95</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_phi_coef</td><td style="text-align:left;">Set the maximum phi parameter</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">1.05</td></tr><tr><td style="text-align:left;">[BUFFER] max_buffer_num</td><td style="text-align:left;">Specify the maximum number of buffers to be inserted</td><td style="text-align:left;">[0-1000000]</td><td style="text-align:left;">35000</td></tr><tr><td style="text-align:left;">[BUFFER] buffer_type</td><td style="text-align:left;">Specify the name of the buffer type that can be inserted</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[LG] max_displacement</td><td style="text-align:left;">Specify the maximum displacement of cells</td><td style="text-align:left;">[10000-1000000]</td><td style="text-align:left;">50000</td></tr><tr><td style="text-align:left;">[LG] global_right_padding</td><td style="text-align:left;">Specify the spacing between cells (in units of Site)</td><td style="text-align:left;">[0,1,2,3,4...]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[DP] max_displacement</td><td style="text-align:left;">Specify the maximum displacement of cells</td><td style="text-align:left;">[10000-1000000]</td><td style="text-align:left;">50000</td></tr><tr><td style="text-align:left;">[DP] global_right_padding</td><td style="text-align:left;">Specify the spacing between cells (in units of Site)</td><td style="text-align:left;">[0,1,2,3,4...]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[Filler] first_iter</td><td style="text-align:left;">Specify the Filler used in the first iteration</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[Filler] second_iter</td><td style="text-align:left;">Specify the Filler used in the second iteration</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[Filler] min_filler_width</td><td style="text-align:left;">Specify the minimum width of the Filler (in units of Site)</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[MP] fixed_macro</td><td style="text-align:left;">Specify the fixed macro unit (string macro_name)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] fixed_macro_coordinate</td><td style="text-align:left;">Specify the position coordinates of the fixed macro unit (int location_x, int location_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] blockage</td><td style="text-align:left;">Specify the rectangular blocking area of the macro unit, and the macro unit should avoid being placed in this area (int left_bottom_x, int left_bottom_y, int right_top_x, int right_top_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] guidance_macro</td><td style="text-align:left;">Specify the macro unit for guidance placement, and each macro unit can set the expected placement area (string macro_name)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] guidance</td><td style="text-align:left;">Specify the guidance placement area corresponding to the macro unit (int left_bottom_x, int left_bottom_y, int right_top_x, int right_top_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] solution_type</td><td style="text-align:left;">Specify the representation of the solution</td><td style="text-align:left;">[&quot;BStarTree&quot;,&quot;SequencePair&quot;]</td><td style="text-align:left;">&quot;BStarTree&quot;</td></tr><tr><td style="text-align:left;">[MP] perturb_per_step</td><td style="text-align:left;">Specify the number of perturbations per step in the simulated annealing</td><td style="text-align:left;">[10-1000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[MP] cool_rate</td><td style="text-align:left;">Specify the cooling rate of the simulated annealing temperature</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.92</td></tr><tr><td style="text-align:left;">[MP] parts</td><td style="text-align:left;">Specify the number of partitions of standard cells (int)</td><td style="text-align:left;">[10-100]</td><td style="text-align:left;">66</td></tr><tr><td style="text-align:left;">[MP] ufactor</td><td style="text-align:left;">Specify the unbalance value of the standard cell partition (int)</td><td style="text-align:left;">[10-1000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[MP] new_macro_density</td><td style="text-align:left;">Specify the density of the virtual macro unit</td><td style="text-align:left;">[0.0-1.0]</td><td style="text-align:left;">0.6</td></tr><tr><td style="text-align:left;">[MP] halo_x</td><td style="text-align:left;">Specify the halo in the horizontal direction of the macro unit</td><td style="text-align:left;">[0-1000000]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">[MP] halo_y</td><td style="text-align:left;">Specify the halo in the vertical direction of the macro unit</td><td style="text-align:left;">[0-1000000]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">[MP] output_path</td><td style="text-align:left;">Specify the output file path</td><td style="text-align:left;"></td><td style="text-align:left;">&quot;./result/pl&quot;</td></tr></tbody></table><h3 id="supported-functions" tabindex="-1"><a class="header-anchor" href="#supported-functions" aria-hidden="true">#</a> Supported Functions</h3><ul><li>Support global placement, legalization, and detailed placement of standard cells;</li><li>Support conducting violation checks on the placement result, reporting wire length, density, timing, and congestion in the placement stage</li><li>Support inserting buffers during the placement stage for long wire optimization;</li><li>Support incremental legalization;</li><li>Timing optimization and congestion optimization are further improved;</li></ul><hr><blockquote><h2 id="ipl-usage-example" tabindex="-1"><a class="header-anchor" href="#ipl-usage-example" aria-hidden="true">#</a> iPL Usage Example</h2></blockquote><h3 id="startup-via-tcl" tabindex="-1"><a class="header-anchor" href="#startup-via-tcl" aria-hidden="true">#</a> Startup via tcl</h3><p>Refer to iPL_script/run_iPL.tcl: <code>&lt;ieda_path&gt;/scripts/design/sky130_gcd/script/iPL_script/run_iPL.tcl</code></p><p>Tcl commands supported by iPL</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>run_placer -conifg &lt;config_path&gt; // Run the entire iPL completely
run_filler -conifg &lt;config_path&gt; // Fill the blank areas of the placement with cells
run_incremental_flow -conifg &lt;config_path&gt; // Re-legalize the result of changing the cell positions
run_incremental_lg // Perform incremental legalization. Ensure iPL has been run
placer_check_legality // Check the legality of the current placement
placer_report // Report the status of the current placement
init_pl -conifg &lt;config_path&gt; // Initialize the placer
destroy_pl // Destroy the placer
placer_run_mp // Perform macro cell placement
placer_run_gp // Perform global placement of standard cells
placer_run_lg // Perform legalization of standard cells
placer_run_dp // Perform detailed placement of standard cells
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="config-configuration-file" tabindex="-1"><a class="header-anchor" href="#config-configuration-file" aria-hidden="true">#</a> Config Configuration File</h3><p>Refer to iEDA_config/pl_default_config.json: <code>&lt;ieda_path&gt;/scripts/design/sky130_gcd/iEDA_config/pl_default_config.json</code></p><table><thead><tr><th style="text-align:left;">JSON Parameter</th><th style="text-align:left;">Function Description</th><th style="text-align:left;">Parameter Range</th><th style="text-align:left;">Default Value</th></tr></thead><tbody><tr><td style="text-align:left;">is_max_length_opt</td><td style="text-align:left;">Whether to enable maximum wire length optimization</td><td style="text-align:left;">[0,1]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">max_length_constraint</td><td style="text-align:left;">Specify the maximum wire length</td><td style="text-align:left;">[0-1000000]</td><td style="text-align:left;">1000000</td></tr><tr><td style="text-align:left;">is_timing_effort</td><td style="text-align:left;">Whether to enable timing optimization mode</td><td style="text-align:left;">[0,1]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">is_congestion_effort</td><td style="text-align:left;">Whether to enable routability optimization mode</td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">ignore_net_degree</td><td style="text-align:left;">Ignore nets with more than the specified number of pins</td><td style="text-align:left;">[10-10000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">num_threads</td><td style="text-align:left;">Specify the number of CPU threads</td><td style="text-align:left;">[1-64]</td><td style="text-align:left;">8</td></tr><tr><td style="text-align:left;">[GP-Wirelength] init_wirelength_coef</td><td style="text-align:left;">Set the initial wire length coefficient</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.25</td></tr><tr><td style="text-align:left;">[GP-Wirelength] reference_hpwl</td><td style="text-align:left;">Adjust the reference wire length for density penalty</td><td style="text-align:left;">[100 - 1000000]</td><td style="text-align:left;">446000000</td></tr><tr><td style="text-align:left;">[GP-Wirelength] min_wirelength_force_bar</td><td style="text-align:left;">Control the wire length boundary</td><td style="text-align:left;">[-1000 - 0]</td><td style="text-align:left;">-300</td></tr><tr><td style="text-align:left;">[GP-Density] target_density</td><td style="text-align:left;">Specify the target density</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.8</td></tr><tr><td style="text-align:left;">[GP-Density] bin_cnt_x</td><td style="text-align:left;">Specify the number of Bins in the horizontal direction</td><td style="text-align:left;">[16, 32, 64, 128, 256, 512, 1024]</td><td style="text-align:left;">512</td></tr><tr><td style="text-align:left;">[GP-Density] bin_cnt_y</td><td style="text-align:left;">Specify the number of Bins in the vertical direction</td><td style="text-align:left;">[16, 32, 64, 128, 256, 512, 1024]</td><td style="text-align:left;">512</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_iter</td><td style="text-align:left;">Specify the maximum number of iterations</td><td style="text-align:left;">[50 - 2000]</td><td style="text-align:left;">2000</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_backtrack</td><td style="text-align:left;">Specify the maximum number of backtracks</td><td style="text-align:left;">[0 - 100]</td><td style="text-align:left;">10</td></tr><tr><td style="text-align:left;">[GP-Nesterov] init_density_penalty</td><td style="text-align:left;">Specify the density penalty in the initial state</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.00008</td></tr><tr><td style="text-align:left;">[GP-Nesterov] target_overflow</td><td style="text-align:left;">Specify the target overflow value</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.1</td></tr><tr><td style="text-align:left;">[GP-Nesterov] initial_prev_coordi_update_coef</td><td style="text-align:left;">The coefficient when perturbing the initial coordinates</td><td style="text-align:left;">[10 - 10000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[GP-Nesterov] min_precondition</td><td style="text-align:left;">Set the minimum value of the precondition</td><td style="text-align:left;">[1 - 100]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[GP-Nesterov] min_phi_coef</td><td style="text-align:left;">Set the minimum phi parameter</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.95</td></tr><tr><td style="text-align:left;">[GP-Nesterov] max_phi_coef</td><td style="text-align:left;">Set the maximum phi parameter</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">1.05</td></tr><tr><td style="text-align:left;">[BUFFER] max_buffer_num</td><td style="text-align:left;">Specify the maximum number of buffers to be inserted</td><td style="text-align:left;">[0 - 1000000]</td><td style="text-align:left;">35000</td></tr><tr><td style="text-align:left;">[BUFFER] buffer_type</td><td style="text-align:left;">Specify the name of the buffer type that can be inserted</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[LG] max_displacement</td><td style="text-align:left;">Specify the maximum displacement of cells</td><td style="text-align:left;">[10000 - 1000000]</td><td style="text-align:left;">50000</td></tr><tr><td style="text-align:left;">[LG] global_right_padding</td><td style="text-align:left;">Specify the spacing between cells (in units of Site)</td><td style="text-align:left;">[0, 1, 2, 3, 4,...]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[DP] max_displacement</td><td style="text-align:left;">Specify the maximum displacement of cells</td><td style="text-align:left;">[10000 - 1000000]</td><td style="text-align:left;">50000</td></tr><tr><td style="text-align:left;">[DP] global_right_padding</td><td style="text-align:left;">Specify the spacing between cells (in units of Site)</td><td style="text-align:left;">[0, 1, 2, 3, 4,...]</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[Filler] first_iter</td><td style="text-align:left;">Specify the Filler used in the first iteration</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[Filler] second_iter</td><td style="text-align:left;">Specify the Filler used in the second iteration</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[Filler] min_filler_width</td><td style="text-align:left;">Specify the minimum width of the Filler (in units of Site)</td><td style="text-align:left;">Process-related</td><td style="text-align:left;">1</td></tr><tr><td style="text-align:left;">[MP] fixed_macro</td><td style="text-align:left;">Specify the fixed macro unit (string macro_name)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] fixed_macro_coordinate</td><td style="text-align:left;">Specify the position coordinates of the fixed macro unit (int location_x, int location_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] blockage</td><td style="text-align:left;">Specify the rectangular blocking area of the macro unit, and the macro unit should avoid being placed in this area (int left_bottom_x, int left_bottom_y, int right_top_x, int right_top_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] guidance_macro</td><td style="text-align:left;">Specify the macro unit for guidance placement, and each macro unit can set the expected placement area (string macro_name)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] guidance</td><td style="text-align:left;">Specify the guidance placement area corresponding to the macro unit (int left_bottom_x, int left_bottom_y, int right_top_x, int right_top_y)</td><td style="text-align:left;">Design-related</td><td style="text-align:left;">List[...,...]</td></tr><tr><td style="text-align:left;">[MP] solution_type</td><td style="text-align:left;">Specify the representation of the solution</td><td style="text-align:left;">[&quot;BStarTree&quot;, &quot;SequencePair&quot;]</td><td style="text-align:left;">&quot;BStarTree&quot;</td></tr><tr><td style="text-align:left;">[MP] perturb_per_step</td><td style="text-align:left;">Specify the number of perturbations per step in the simulated annealing</td><td style="text-align:left;">[10 - 1000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[MP] cool_rate</td><td style="text-align:left;">Specify the cooling rate of the simulated annealing temperature</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.92</td></tr><tr><td style="text-align:left;">[MP] parts</td><td style="text-align:left;">Specify the number of partitions of standard cells (int)</td><td style="text-align:left;">[10 - 100]</td><td style="text-align:left;">66</td></tr><tr><td style="text-align:left;">[MP] ufactor</td><td style="text-align:left;">Specify the unbalance value of the standard cell partition (int)</td><td style="text-align:left;">[10 - 1000]</td><td style="text-align:left;">100</td></tr><tr><td style="text-align:left;">[MP] new_macro_density</td><td style="text-align:left;">Specify the density of the virtual macro unit</td><td style="text-align:left;">[0.0 - 1.0]</td><td style="text-align:left;">0.6</td></tr><tr><td style="text-align:left;">[MP] halo_x</td><td style="text-align:left;">Specify the halo in the horizontal direction of the macro unit</td><td style="text-align:left;">[0 - 1000000]</td><td style="text-align:left;">0</td></tr><tr><td style="text-align:left;">[MP] halo_y</td><td style="text-align:left;">Specify the halo in the vertical direction of the macro unit</td><td style="text-align:left;">[0 - 1000000]</td><td style="text-align:left;">0</td></tr></tbody></table><h3 id="running-log-and-report" tabindex="-1"><a class="header-anchor" href="#running-log-and-report" aria-hidden="true">#</a> Running Log and Report</h3><p>Stored in the directory by default: <code>&lt;ieda_path&gt;/scripts/design/sky130_gcd/result/pl/</code></p><ul><li>report/violation_record.txt : Cells with placement violations</li><li>report/wirelength_record.txt : Statistics of HPWL wire length, STWL wire length, and long wire length of the placement</li><li>report/density_record.txt : Peak bin density of the placement</li><li>report/timing_record.txt : Timing information of the placement (wns, tns), calling Flute for simple routing</li></ul>`,19);function u(m,_){return d(),a("div",null,[o,e(' <img src="@source/en/tools/img/iPL/iPL_5.png"> '),f,g,e(' <img src="@source/en/tools/img/iPL/iPL_4.png"> '),y,e(' <img src="@source/en/tools/img/iPL/iPL_9.png"> '),c,e(' <img src="@source/en/tools/img/iPL/iPL_10.png"> '),x,e(' <img src="@source/en/tools/img/iPL/iPL_2.png"> '),h,e(' <img src="@source/en/tools/img/iPL/iPL_3.png"> '),p])}const S=n(s,[["render",u],["__file","ipl.html.vue"]]);export{S as default};
